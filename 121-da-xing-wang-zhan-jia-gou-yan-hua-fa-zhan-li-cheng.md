# 大型網站架構演化發展歷程

這邊是從[這裡](http://www.hollischuang.com/archives/728)看來的, 覺得很不錯所以就自己整理一次放上來:

大型網站的技術挑戰有很多, 最常見的有以下幾點:

* 龐大的使用者數量
* 高並發的存取\(High Concurrency\)
* 海量的資料

任何一個簡單的業務一但需要處理以Peta為數量級的資料與面對數以億計的使用者, 問題就會瞬間變得很棘手, 而大型網站架構就是想要解決這類問題.

#### 初始階段的網站架構

大網站一開始都是從小型網站演化來的, 網站架構也一樣, 是從小型網站架構逐步演變而來. 一開始的小型網站沒什麼人會來, 也許一台server就可以撐住了, 這時候的架構可能像這樣:

應用程式、資料庫與文件等等, 所有的資源都在同一台server上.

#### 應用程式與資料分離

隨著網站業務的發展, 一台server逐漸不能滿足需求了: 越來越多的使用者存取導致server的性能越來越差, 越來越多的資料導致儲存空間不足. 這時候就可以把應用程式跟資料做分離的動作. 分離之後整個網站使用三台server: 應用程式server、文件server以及資料庫server. 當然, 這三台server對硬體的需求也是不同的.

* Application Server: 需要處理大量的業務邏輯, 因此需要更快更強大的CPU
* Document Server: 需要快速的磁碟檢索跟資料快取, 所以需要更快的磁碟與更大的記憶體
* Database Server: 需要儲存大量使用者上傳的文件, 因此需要更大的硬碟

此時的網站架構可能像這樣:

應用程式跟資料分離後, 不同特性的server承擔不同的角色, 網站的並發處理能力跟資料儲存空間得到了改善, 所以可以進一步支持網站的業務發展了. 然而, 使用者又繼續增加了, 網站又碰到了新的挑戰: 資料庫壓力太大導致存取latency增加, 進而影響了整個網站的效能, UX受到影響...

#### 使用Cache改善網站性能

網站存取的特性跟現實世界的財富分配很相似, 遵循著二八法則: 80%的業務存取集中在20%的資料上. 既然大部分的業務存取集中在一小部分的資料上, 那麼若把這一小部分的資料快取在記憶當中, 就可以減少資料庫的存取壓力, 進而提高網站的資料存取速度並且改善資料庫的寫入性能了. 網站使用的快取可以分為兩種: 位於應用程式server上的local cache以及專門的分布式快取server上的遠端快取.

此時的網站架構可能像這樣:

其中:

* Local cache的存取速度更快一些, 但是受應用程式server的記憶體限制, 其快取資料量有限, 且會出現和應用程式搶記憶體的情況.
* 遠端分布式快取可以使用叢集的方式, 部署帶有大容量記憶體的server作為專門的快取server, 可以在理論上做到不受記憶體容量限制的快取服務.

使用快取後, 資料存取壓力得到有效的緩解, 但是單一應用程式server能夠處理的請求連接是有限的, 在網站存取的高峰期, 應用程式server會變成整個網站的瓶頸.

#### 使用應用程式伺服器叢集改善網站的並發處理能力

#### 資料庫的讀寫分離

#### 引入反向代理與CDN加速網站的回應能力

#### 使用分散式文件系統與分散式資料庫系統

#### 使用NoSQL和搜尋引擎

#### 業務的拆分

#### 分散式服務



